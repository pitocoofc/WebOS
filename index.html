<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Booting System...</title>
    <style>
        * { box-sizing: border-box; }
        body {
            background: #050505; color: #fff; margin: 0;
            height: 100vh; display: flex; align-items: center; justify-content: center;
            font-family: 'Consolas', 'Monaco', monospace; overflow: hidden;
        }

        .screen { display: none; flex-direction: column; align-items: center; width: 90%; max-width: 400px; }
        .active { display: flex; }

        /* Spinner Cinza */
        .spinner {
            width: 14px; height: 14px; border: 2px solid #333;
            border-top: 2px solid #fff; border-radius: 50%;
            display: inline-block; animation: spin 1s linear infinite;
            vertical-align: middle; margin-right: 10px;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* Estilo dos Logs */
        #log-container { text-align: left; width: 100%; font-size: 13px; line-height: 1.8; }
        .log-entry { color: #555; transition: color 0.4s; margin-bottom: 5px; }
        .log-entry.done { color: #eee; }
        .log-entry.done .spinner { display: none; }
        .log-entry.done::before { content: '[ OK ] '; color: #0f0; margin-right: 5px; }

        /* Input de Nome */
        input {
            background: transparent; border: none; border-bottom: 2px solid #3b82f6;
            color: #fff; padding: 10px; font-size: 18px; text-align: center;
            outline: none; width: 100%; margin-top: 20px;
        }

        /* Barra de Progresso Final */
        .progress-bar { width: 100%; height: 2px; background: #222; margin-top: 20px; overflow: hidden; }
        .fill { height: 100%; background: #3b82f6; width: 0%; transition: width 0.1s; }
    </style>
</head>
<body>

    <div id="phase1" class="screen active">
        <div style="font-size: 24px; letter-spacing: 5px; margin-bottom: 20px;">SYSTEM</div>
        <div class="progress-bar"><div id="fill1" class="fill"></div></div>
    </div>

    <div id="phase2" class="screen">
        <label>IDENTIFIQUE-SE NO TERMINAL:</label>
        <input type="text" id="username" autocomplete="off" placeholder="Digite seu nome..." autofocus>
        <p style="font-size: 10px; color: #444; margin-top: 10px;">PRESSIONE ENTER PARA CONFIRMAR</p>
    </div>

    <div id="phase3" class="screen">
        <div id="log-container"></div>
    </div>

    <div id="phase4" class="screen">
        <div id="user-welcome" style="margin-bottom: 10px; font-size: 14px;"></div>
        <div class="status-text" style="font-size: 10px; color: #888;">FINALIZANDO SETUP...</div>
        <div class="progress-bar"><div id="fill2" class="fill"></div></div>
    </div>

    <script>
        const phase1 = document.getElementById('phase1');
        const phase2 = document.getElementById('phase2');
        const phase3 = document.getElementById('phase3');
        const phase4 = document.getElementById('phase4');

        // Inicia Fase 1
        let p1 = 0;
        const int1 = setInterval(() => {
            p1 += 2;
            document.getElementById('fill1').style.width = p1 + "%";
            if(p1 >= 100) {
                clearInterval(int1);
                phase1.classList.remove('active');
                phase2.classList.add('active');
                document.getElementById('username').focus();
            }
        }, 30);

        // Lógica de Input
        document.getElementById('username').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && this.value.length > 2) {
                localStorage.setItem('os_user', this.value);
                phase2.classList.remove('active');
                startLogs();
            }
        });

        // FASE 3: Logs Dinâmicos
        const logData = [
            "Conectando ao servidor de nuvem...",
            "Autenticando credenciais via SSL...",
            "Montando diretórios temporários...",
            "Iniciando subsistema de interface...",
            "Carregando drivers de vídeo mobile...",
            "Limpando registros de cache antigos...",
            "Estabelecendo conexão persistente..."
        ];

        function startLogs() {
            phase3.classList.add('active');
            const container = document.getElementById('log-container');
            let current = 0;

            function addLog() {
                if (current < logData.length) {
                    const entry = document.createElement('div');
                    entry.className = 'log-entry';
                    entry.innerHTML = `<span class="spinner"></span>${logData[current]}`;
                    container.appendChild(entry);

                    setTimeout(() => {
                        entry.classList.add('done');
                        current++;
                        addLog();
                    }, 700);
                } else {
                    setTimeout(startFinalPhase, 500);
                }
            }
            addLog();
        }

        // FASE 4: Finalização
        function startFinalPhase() {
            phase3.classList.remove('active');
            phase4.classList.add('active');
            document.getElementById('user-welcome').innerText = "BEM-VINDO, " + localStorage.getItem('os_user').toUpperCase();
            
            let p2 = 0;
            const int2 = setInterval(() => {
                p2 += 1;
                document.getElementById('fill2').style.width = p2 + "%";
                if(p2 >= 100) {
                    clearInterval(int2);
                    window.location.href = "os.html";
                }
            }, 40); // Um pouco mais lento como pedido
        }
    </script>
</body>
</html>
